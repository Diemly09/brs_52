<div class="box">
  <div class="box-header with-border">
    <h3 class="box-title">
      <%= t "categories.actions.all" %>
    </h3>

    <div class="box-tools">
      <button type="button" class="btn btn-box-tool" data-widget="collapse">
        <i class="fa fa-minus"></i>
      </button>
      <div class="btn-group open">
        <button type="button" class="btn btn-box-tool dropdown-toggle"
          data-toggle="dropdown" aria-expanded="true">
          <i class="fa fa-wrench"></i></button>
        <ul class="dropdown-menu admin-dropdown" role="menu">
          <li>
            <%= link_to t("buttons.new"),
              new_admin_category_book_path(@category) %>
          </li>
        </ul>
      </div>
      <button type="button" class="btn btn-box-tool" data-widget="remove">
        <i class="fa fa-times"></i>
      </button>
    </div>
  </div>

  <div class="box-body">
    <table class="table table-bordered">
      <thead>
        <tr>
          <th style="width: 10px">#</th>
          <th><%= t "books.headers.image" %></th>
          <th><%= t "books.headers.title" %></th>
          <th><%= t "books.headers.author" %></th>
          <th><%= t "books.headers.description" %></th>
          <th><%= t "books.headers.publish_date" %></th>
          <th><%= t "col_action" %></th>
        </tr>
      </thead>
      <tbody>
        <% @books.each_with_index do |book, index| %>
          <tr>
            <td><%= index + 1 %></td>
            <td class="width-200">
              <% if book.image %>
                <%= image_tag book.image, class: "img-responsive" %>
              <% end %>
            </td>
            <td class="width-300">
              <p><%= book.title %></p>
              <p>
                <% if book.number_of_pages %>
                  <%= book.number_of_pages %> pages
                <% end %>
              </p>
            </td>
            <td><%= book.author %></td>
            <td>
              <% if strip_tags(book.description).length > 300 %>
                <div class="description-less">
                  <%= truncate strip_tags(book.description), length: 300 %>
                  <%= link_to t("books.more"), "#", class: "show-more", remote: true %>
                </div>
                <div class="description-full hidden">
                  <%= book.description.html_safe %>
                  <%= link_to t("books.less"), "#", class: "show-less", remote: true %>
                </div>
              <% else %>
                <div class="description-full">
                  <%= @book.description.html_safe %>
                </div>
              <% end %>
            </td>
            <td>
              <% if book.publish_date %>
                <%= l book.publish_date, format: :short %>
              <% else %>
                <%= l book.created_at, format: :short %>
              <% end %>
            </td>
            <td class="text-center">
              <%= link_to t("books.actions.update"), edit_admin_book_path(book),
                class:"btn btn-info" %>
              <hr>
              <%= link_to t("books.actions.destroy"), admin_book_path(book),
                class:"btn btn-danger", method: :delete,
                data: {confirm: "You sure?"} %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
